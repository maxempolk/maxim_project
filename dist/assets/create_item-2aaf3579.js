import{r as k,o as l,c as r,a as e,F as v,f as g,w as _,v as c,h as f,t as d,e as m,g as b,i as w,l as y}from"./index-12e9a619.js";import"https://cdn.polyfill.io/v3/polyfill.min.js?features=URL";const D={class:"container"},$={class:"row"},U={class:"col-4 inputs_block_left",style:{"border-right":"1px dotted gray"}},S=e("h2",{class:"text-center"},"Create Auction Item",-1),T={class:"form-group errors"},V={class:"one_input_block title_block"},C={class:"covers_block"},M={class:"icon_to_share_covers"},A={class:"icon",for:"file-input"},F=e("span",null,"Download photo",-1),q={class:"one_input_block starting_price_block"},B=e("span",{class:"starting_price_text"},"Starting price: ",-1),L={class:"input_block_in_create"},N=e("span",{class:"to_left"},"USD",-1),O={class:"end_time_block"},R={class:"one_input_block starting_price_block"},I=e("span",{class:"starting_price_text"},"Bid among: ",-1),j={class:"input_block_in_create"},E=e("span",{class:"to_left"},"USD",-1),P={class:"one_input_block description_block"},z={class:"button_block"},H={class:"col-8",style:{"padding-left":"15px"}},Y={class:"row"},Z={class:"col text-center"},G={class:"item_title"},J=y('<div class="row"><div class="item_info"><ul class="item_info_ul"><li> Rates: <div> - </div></li><li> Current Price: <div> - </div></li><li> Lot id: <div> - </div></li><li> Added: <div> - </div></li><li> Owner: <div> you </div></li></ul></div></div>',1),K={class:"row"},Q={class:"col-5 image_block"},W={class:"row"},X={key:0,class:"col"},x=["href"],ee=["src"],te=e("br",null,null,-1),se={key:0,class:"row"},ie={class:"col-4"},oe=["href"],ne=["src"],le={class:"col-6 right_info_block"},re={key:0,class:"row information_block"},ae={class:"errors"},de={class:"row information_block"},_e={class:"row information_block"},ce={class:"item_cost"},ue={key:1,class:"row information_block"},me={class:"login_url"},pe=e("span",null," to make a bid",-1),he={key:2,class:"row information_block bid_input"},ve={class:"row"},ge={class:"input-group"},fe=e("div",{class:"input-group-prepend"},[e("a",null,[e("span",{class:"input-group-text"},"-")])],-1),be=["value"],ke=e("span",{class:"dollar-sign"},"USD",-1),we=e("div",{class:"input-group-append"},[e("a",null,[e("span",{class:"input-group-text"},"+")])],-1),ye=e("div",{class:"row"},[e("a",{class:"do_bid_btn"},"place a bet")],-1),De={class:"row description_block"},$e=e("div",{class:"row"},[e("div",{class:"title"}," Description ")],-1),Ue={class:"row"},Se={class:"content"},Te={data(){return{item:{title:null,description:null,starting_price:null,bid_increment:null,end_time:null,covers_files:null},errors:[],preview_images:null}},methods:{id_formater(n){let t=String(n),i=8-t.length;for(let o=0;o<i;o++)t="0"+t;return t},convert_data(n){return new Date(n).toISOString().slice(0,19).replace("T"," ")},images_to_base64(n){let t=Array.from(n.target.files);this.preview_images=[],t.forEach(o=>{this.preview_images.push(this.$URL.createObjectURL(o))});let i=[];t.forEach(o=>{if(o){let a=new FileReader;a.onloadend=()=>{let s=a.result;i.push(s)},a.readAsDataURL(o)}}),this.item.covers_files=i},create_item(){if(this.errors=[],!(this.item.title&&this.item.description&&this.item.starting_price&&this.item.bid_increment&&this.item.end_time&&this.item.covers_files)){this.errors.push("Inputs must be not empty.");return}let n=this.$cookies.get("access_token");this.$axios.post(this.$host_adress+"/create_item",this.item,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}).then(t=>{t.data.ok?this.$router.push("/"):this.errors.push("The bet failed, recheck the data.")})},formatDate(n){let t=new Date(n),i=t.getDate(),o=t.getMonth()+1,a=t.getFullYear(),s=t.getHours(),u=t.getMinutes(),p=`${i<10?"0":""}${i}.${o<10?"0":""}${o}.${a}`,h=`${s<10?"0":""}${s}:${u<10?"0":""}${u}`;return`${p}, ${h}`}},computed:{daysUntilTargetDate(){if(this.item==null)return;let n=this.item.end_time,t=new Date,o=new Date(n)-t;if(o<0)return"The date has already passed";let a=Math.floor(o/(1e3*60*60*24)),s=o%(1e3*60*60*24),u=Math.floor(s/(1e3*60*60)),p=Math.floor(s%(1e3*60*60)/(1e3*60)),h=Math.floor(s%(1e3*60)/1e3);return`${a} days ${u}:${p}:${h}`}}},Ae=Object.assign(Te,{__name:"create_item",setup(n){return(t,i)=>{const o=k("font-awesome-icon"),a=k("router-link");return l(),r("div",D,[e("div",$,[e("div",U,[S,e("div",T,[e("ul",null,[(l(!0),r(v,null,g(t.errors,s=>(l(),r("li",null,d(s),1))),256))])]),e("div",V,[_(e("input",{required:"","onUpdate:modelValue":i[0]||(i[0]=s=>t.item.title=s)},null,512),[[c,t.item.title]])]),e("div",C,[e("div",M,[e("input",{type:"file",class:"custom-file-input",id:"file-input",accept:"image/*",multiple:"",onChange:i[1]||(i[1]=(...s)=>t.images_to_base64&&t.images_to_base64(...s))},null,32),e("label",A,[f(o,{icon:"download"})]),F])]),e("div",q,[B,e("div",L,[_(e("input",{type:"number",step:"1",min:"0",required:"","onUpdate:modelValue":i[2]||(i[2]=s=>t.item.starting_price=s)},null,512),[[c,t.item.starting_price]]),N])]),e("div",O,[_(e("input",{type:"datetime-local",class:"form-control",id:"end_time",name:"end_time",required:"","onUpdate:modelValue":i[3]||(i[3]=s=>t.item.end_time=s)},null,512),[[c,t.item.end_time]])]),e("div",R,[I,e("div",j,[_(e("input",{type:"number",step:"1",min:"0",required:"","onUpdate:modelValue":i[4]||(i[4]=s=>t.item.bid_increment=s)},null,512),[[c,t.item.bid_increment]]),E])]),e("div",P,[_(e("textarea",{required:"","onUpdate:modelValue":i[5]||(i[5]=s=>t.item.description=s)},null,512),[[c,t.item.description]])]),e("div",z,[e("button",{onClick:i[6]||(i[6]=(...s)=>t.create_item&&t.create_item(...s))},"Submit")])]),e("div",H,[e("div",Y,[e("div",Z,[e("h1",G,"Preview of "+d(t.item.title),1)])]),J,e("div",K,[e("div",Q,[e("div",W,[t.preview_images?(l(),r("div",X,[e("a",{href:t.preview_images[0],target:"_blank"},[e("img",{src:t.preview_images[0],alt:"main_cover"},null,8,ee)],8,x)])):m("",!0)]),te,t.preview_images?(l(),r("div",se,[(l(!0),r(v,null,g(t.preview_images.slice(1),s=>(l(),r("div",ie,[e("a",{href:s,target:"_blank"},[e("img",{src:s,alt:"secondary_cover"},null,8,ne)],8,oe)]))),256))])):m("",!0)]),e("div",le,[t.errors.length!=0?(l(),r("div",re,[e("div",ae,[e("ul",null,[(l(!0),r(v,null,g(t.errors,s=>(l(),r("li",null,d(s),1))),256))])])])):m("",!0),e("div",de,[b(" Until the end: "),e("span",null,d(t.daysUntilTargetDate),1)]),e("div",_e,[b(" Current price: "),e("span",ce,"$"+d(t.item.starting_price)+" USD",1)]),t.$cookies.get("access_token")?t.item.buyer_name!=t.$store().getUserInfo()?(l(),r("div",he,[e("div",ve,[e("div",ge,[fe,e("input",{type:"number",class:"form-control",value:Math.floor(t.item.starting_price*1.5)},null,8,be),ke,we])]),ye])):m("",!0):(l(),r("div",ue,[e("div",me,[f(o,{icon:["fas","lock"]}),f(a,{to:"/login",class:"sign_in_text"},{default:w(()=>[b(" Sign in")]),_:1}),pe])]))])]),e("div",De,[$e,e("div",Ue,[e("div",Se,d(t.item.description),1)])])])])])}}});export{Ae as default};
